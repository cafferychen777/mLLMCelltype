% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/consensus_annotation.R
\name{interactive_consensus_annotation}
\alias{interactive_consensus_annotation}
\title{Interactive consensus building for cell type annotation}
\usage{
interactive_consensus_annotation(
  input,
  tissue_name = NULL,
  models = c("claude-3-7-sonnet-20250219", "claude-3-5-sonnet-latest",
    "claude-3-5-haiku-latest", "gemini-2.0-flash", "gemini-1.5-pro",
    "qwen-max-2025-01-25", "gpt-4o", "grok-3-latest"),
  api_keys,
  top_gene_count = 10,
  controversy_threshold = 0.7,
  entropy_threshold = 1,
  max_discussion_rounds = 3,
  consensus_check_model = NULL,
  log_dir = "logs",
  cache_dir = "consensus_cache",
  use_cache = TRUE
)
}
\arguments{
\item{input}{Either the differential gene table returned by Seurat FindAllMarkers() function, or a list of genes}

\item{tissue_name}{Optional input of tissue name}

\item{models}{Vector of model names to participate in the discussion}

\item{api_keys}{Named list of API keys. Can use either provider names or model names as keys}

\item{top_gene_count}{Number of top differential genes to use}

\item{controversy_threshold}{Consensus proportion threshold (default: 0.7). Clusters with consensus proportion below this value will be marked as controversial}

\item{entropy_threshold}{Entropy threshold for identifying controversial clusters (default: 1.0)}

\item{max_discussion_rounds}{Maximum number of discussion rounds for controversial clusters (default: 3)}

\item{consensus_check_model}{Model to use for consensus checking}

\item{log_dir}{Directory for storing logs}

\item{cache_dir}{Directory for storing cache}

\item{use_cache}{Whether to use cached results}
}
\value{
A list containing consensus results, logs, and annotations

A list containing consensus results, logs, and annotations
}
\description{
This function implements an interactive voting and discussion mechanism where multiple LLMs
collaborate to reach a consensus on cell type annotations, particularly focusing on
clusters with low agreement. The process includes:
\enumerate{
\item Initial voting by all LLMs
\item Identification of controversial clusters
\item Detailed discussion for controversial clusters
\item Final summary by a designated LLM (default: Claude)
}

This function implements an interactive voting and discussion mechanism where multiple LLMs
collaborate to reach a consensus on cell type annotations, particularly focusing on
clusters with low agreement. The process includes:
\enumerate{
\item Initial voting by all LLMs
\item Identification of controversial clusters
\item Detailed discussion for controversial clusters
\item Final summary by a designated LLM (default: Claude)
}
}
