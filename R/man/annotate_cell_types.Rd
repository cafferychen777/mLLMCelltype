% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cell_type_annotation.R
\name{annotate_cell_types}
\alias{annotate_cell_types}
\title{Cell Type Annotation with Multi-LLM Framework}
\usage{
annotate_cell_types(
  input,
  tissue_name = NULL,
  model = "gpt-4o",
  api_key = NA,
  top_gene_count = 10,
  debug = FALSE
)
}
\arguments{
\item{input}{One of the following:
\itemize{
\item A data frame from Seurat's FindAllMarkers() function containing differential gene expression results
\item A list where each element has a 'genes' field containing marker genes for a cluster
}}

\item{tissue_name}{Character string specifying the tissue type or cell source (e.g., 'human PBMC',
'mouse brain'). This helps provide context for more accurate annotations.}

\item{model}{Character string specifying the LLM model to use. Supported models:
\itemize{
\item OpenAI: 'gpt-4o', 'o1'
\item Anthropic: 'claude-3-7-sonnet-20250219', 'claude-3-5-sonnet-latest', 'claude-3-5-haiku-latest', 'claude-3-opus'
\item DeepSeek: 'deepseek-chat', 'deepseek-reasoner'
\item Google: 'gemini-2.0-flash', 'gemini-2.0-flash-exp', 'gemini-1.5-pro', 'gemini-1.5-flash'
\item Alibaba: 'qwen-max-2025-01-25'
\item Stepfun: 'step-2-16k', 'step-2-mini', 'step-1-8k'
\item Zhipu: 'glm-4-plus', 'glm-3-turbo'
\item MiniMax: 'minimax-text-01'
\item X.AI: 'grok-3-latest', 'grok-3', 'grok-3-fast', 'grok-3-fast-latest', 'grok-3-mini', 'grok-3-mini-latest', 'grok-3-mini-fast', 'grok-3-mini-fast-latest'
}}

\item{api_key}{Character string containing the API key for the selected model.
If NA, returns the generated prompt without making an API call.}

\item{top_gene_count}{Integer specifying the number of top marker genes to use per cluster.}

\item{debug}{Logical. If TRUE, prints additional debugging information during execution.
when input is from Seurat's FindAllMarkers(). Default: 10}
}
\value{
A character vector containing:
\itemize{
\item When api_key is provided: One cell type annotation per cluster, in the order of input clusters
\item When api_key is NA: The generated prompt string that would be sent to the LLM
}
}
\description{
A comprehensive function for automated cell type annotation using multiple Large Language Models (LLMs).
This function supports both Seurat's differential gene expression results and custom gene lists as input.
It implements a sophisticated annotation pipeline that leverages state-of-the-art LLMs to identify
cell types based on marker gene expression patterns.
}
\examples{
# Example 1: Using custom gene lists, returning prompt only
annotate_cell_types(
  input = list(
    t_cells = list(genes = c('CD3D', 'CD3E', 'CD3G', 'CD28')),
    b_cells = list(genes = c('CD19', 'CD79A', 'CD79B', 'MS4A1')),
    monocytes = list(genes = c('CD14', 'CD68', 'CSF1R', 'FCGR3A'))
  ),
  tissue_name = 'human PBMC',
  model = 'gpt-4o'
)

# Example 2: Using with Seurat pipeline
\dontrun{
library(Seurat)

# Load example data
data("pbmc_small")

# Find marker genes
all.markers <- FindAllMarkers(
  object = pbmc_small,
  only.pos = TRUE,
  min.pct = 0.25,
  logfc.threshold = 0.25
)

# Get cell type annotations
cell_types <- annotate_cell_types(
  input = all.markers,
  tissue_name = 'human PBMC',
  model = 'gpt-4o',
  api_key = 'your-api-key',
  top_gene_count = 15
)
}

}
\seealso{
\itemize{
\item \code{\link[Seurat:FindAllMarkers]{Seurat::FindAllMarkers()}}
\item \code{\link[=get_provider]{get_provider()}}
\item \code{\link[=process_openai]{process_openai()}}
}
}
